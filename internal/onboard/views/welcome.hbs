<!DOCTYPE html>
<html>

<head>
    <title>ISBE Onboarding</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.3/dist/semantic.min.css">
    <style>
        body {
            background: #f5f5f5;
            padding: 40px 0;
        }
        .main.container {
            margin-top: 40px;
            margin-bottom: 40px;
        }
        .token-info {
            font-family: monospace;
            font-size: 13px;
            word-break: break-all;
        }
    </style>
</head>

<body>
    <div class="ui main text container">
        <div class="ui clearing segment">
            <h1 class="ui left floated header">
                ðŸŽ‰ Welcome to ISBE Onboarding
            </h1>
            <a href="/logout" class="ui right floated red button">
                <i class="sign-out icon"></i> Logout
            </a>
        </div>

        <div class="ui positive message">
            <div class="header">
                <i class="check circle icon"></i>
                Authentication Successful!
            </div>
            <div class="ui list">
                <div class="item"><strong>User ID:</strong> {{ .session.UserID }}</div>
                <div class="item"><strong>Session ID:</strong> {{ .session.SessionID }}</div>
                <div class="item"><strong>Login Time:</strong> {{ .session.CreatedAt }}</div>
                <div class="item"><strong>Last Accessed:</strong> {{ .session.LastAccessed }}</div>
            </div>
        </div>


        <div class="ui teal segment">

            {{ if .subject.OrganizationIdentifier }}
            <h3 class="ui header"><i class="building icon"></i>Organization Certificate (from ID Token)</h3>
            {{ else }}
            <h3 class="ui header"><i class="user icon"></i>Personal Certificate (from ID Token)</h3>
            {{ end }}

            <div class="ui list">

                {{ if .subject.OrganizationIdentifier }}
                <div class="item"><strong>Organization Identifier:</strong> {{ .subject.OrganizationIdentifier }}</div>
                {{ end }}

                {{ if .subject.Organization }}
                <div class="item"><strong>Organization:</strong> {{ .subject.Organization }}</div>
                {{ end }}

                {{ if .subject.OrganizationalUnit }}
                <div class="item"><strong>Organizational Unit:</strong> {{ .subject.OrganizationalUnit }}</div>
                {{ end }}

                {{ if .subject.CommonName }}
                <div class="item"><strong>Common Name:</strong> {{ .subject.CommonName }}</div>
                {{ end }}

                {{ if .subject.SerialNumber }}
                <div class="item"><strong>Serial Number:</strong> {{ .subject.SerialNumber }}</div>
                {{ end }}

                {{ if .subject.Email }}
                <div class="item"><strong>Email:</strong> {{ .subject.Email }}</div>
                {{ end }}

                {{ if .subject.Locality }}
                <div class="item"><strong>Locality:</strong> {{ .subject.Locality }}</div>
                {{ end }}

                {{ if .subject.Province }}
                <div class="item"><strong>Province:</strong> {{ .subject.Province }}</div>
                {{ end }}

                {{ if .subject.StreetAddress }}
                <div class="item"><strong>Street Address:</strong> {{ .subject.StreetAddress }}</div>
                {{ end }}

                {{ if .subject.PostalCode }}
                <div class="item"><strong>Postal Code:</strong> {{ .subject.PostalCode }}</div>
                {{ end }}

                {{ if .subject.Country }}
                <div class="item"><strong>Country:</strong> {{ .subject.Country }}</div>
                {{ end }}

                {{ if .subject.ValidFromStr }}
                <div class="item"><strong>Valid From:</strong> {{ .subject.ValidFromStr }}</div>
                {{ end }}

                {{ if .subject.ValidToStr }}
                <div class="item"><strong>Valid To:</strong> {{ .subject.ValidToStr }}</div>
                {{ end }}

            </div>
        </div>


        <div class="ui segment">
            <h3 class="ui header"><i class="key icon"></i> Access Token</h3>
            <div class="token-info">{{ .session.AccessToken }}</div>
        </div>

        <div class="ui segment">
            <h3 class="ui header"><i class="id badge icon"></i> ID Token</h3>
            <div class="token-info">{{ .session.IDToken }}</div>
        </div>

        <div class="ui yellow message">
            <div class="header">
                <i class="info circle icon"></i>
                How This Works
            </div>
            <p>In a real implementation:</p>
            <ul class="ui list">
                <li>The ID Token would be a JWT containing the certificate information</li>
                <li>The RP would validate the JWT signature</li>
                <li>The certificate data would be extracted from the JWT claims</li>
                <li>This data can be used to identify the user and their organization</li>
            </ul>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.9.3/dist/semantic.min.js"></script>
</body>